> 이슈 #9, network/tcp&ip

## OSI 7계층은 무엇인가?
> 네트워크 계층을 프로토콜 디자인에 맞게 layering 한 것으로, 각 계층을 독립적으로 구성해 서로간에 의존성을 줄인다. 
> L1은 물리계층으로, 실제 아날로그 데이터와 이진데이터가 물리적으로 처리되어지는 계층이다. 
> L2는 link 계층으로, network 카드 기반의 MAC 주소가 물리적으로 활용되어진다. checksum을 바탕으로 물리적 통신간 오류가 있었는지 확인한다.
> L3는 network 계층으로, ip주소가 host로써 활용되어지고, 라우팅작업이 일어나게된다. 
> L4는 transport계층으로, process로의 연결이 이루어지며, 프로토콜에 따라 신뢰성있는 통신과 연결이 유지될수있다. 
> L5부터 L7은 각각 session, presentation, application layer로 모두 프로세스 자체에 집중되어있다. 
> L5는 통신을 관리하고, L6는 확장자 인코딩의 작업이 이루어지며, L7은 서비스 작업이 수행된다.  

### transport layer 와 network layer 의 차이는?
> 큰 차이점은 대상의 차이이다. l3는 host 간의 논리적인 통신을 위한 처리가 이루어지며, l4는 process간 논리적인 통신을 위한 처리가 이루어진다. 

## TCP 와 UDP 의 차이점은?
> TCP 는 신뢰성있는 연결지향형 프로토콜로, 순서와 신뢰성 등을 보장하기 위해 header 가 무거워진다. 반면 UDP 는 비연결지향형 프로토콜로, 
> header가 상대적으로 가볍다. 

### UDP는 순서를 보장해줄수없나?
> RUDP 나 최근에 나온 구글에서 만든 QUIC 같은 경우는 UDP 를 보완하여 순서와 신뢰성을 보장하려고 시도한다.

### UDP는 언제 활용되어지나?
> 빠르고 패킷을 좀 잃어도 지장없는 통신에 활용된다. streaming, DNS 같은 작업이 있으며,
> RUDP 같은 경우는 실시간 게임에서 활용되어지는 편이다.
> QUIC는 HTTP 3.0에 적용이 되었다.

### TCP의 segment 에는 무엇이 담기나?
> 연결 지향형이므로, 자신과 상대의 ip, port 번호가 담기게되고, 순서를 보장하기 위해 seq num, ack num가 담긴다. 또한 통신간 혼잡을 줄이기위해 
> window size가 담기게되고, 통신간 오류를 확인하기 위한 checksum도 담긴다.

### 그럼 UDP에는 무엇이 담기나?
> 상대 ip와 port, 전체 length, 그리고 통신간 오류 체크를 위한 checksum이 담긴다.

## Multiplexing 과 Demultiplexing 은?
> multiplexing 은 송신자의 입장에서 여러 소켓으로 부터 받은 정보를 쪼개고 header를 붙혀 segment를 생성해 network layer로 전달하는 과정이고, 
> demultiplexing은 수신자의 입장에서 쪼개진 세그먼트를 합치고 header를 통해 올바른 소켓으로 데이터를 전달해주는 과정을 의미한다.

### 위 두과정에 있어 필요한 정보는 무엇인가?
> socket에 대한 정보가 기본적으로 필요하며, UDP의 경우에는 상대의 ip, port 정보, TCP의 경우에는 자신과 상대의 ip, port 정보가 필요로하다.

## TCP 통신에 있어, 신뢰성을 보장하기 위해 어떤 방법들이 적용되어지나?
> 상위 layer는 하위 layer에서 신뢰성이 보장된다면 전체적으로 보장된다는 전재를 바탕으로, checksum 을 통한 비트 오류, seqnum 을 통한 패킷손실을 
> 확인해 신뢰성을 보장한다. 이때 rdt, pipeline 두 방식이 활용된다.

### rdt와 pipeline은 무엇이고 차이점은?
> rdt는 기본적으로 checksum을 통한 비트에러 확인, timer를 통한 timeout을 바탕으로 신뢰성을 보장하지만, 동기적인 방식이다. 
> pipeline 은 ack가 오지않아도 우선 패킷을 전부 보내 비동기적인 처리를 수행하도록 한다.

### pipeline은 구체적으로 어떻게 동작?
> buffer를 기반으로 동작하게된다. go-back-n 방식은 일정 window size만큼 패킷을 전부보내고 loss가 발생하면 다시 보내는 형식이며, 
> selected repeat 방식은 각 패킷에 timer를 적용하여 timeout이 발생한 패킷에 대해서만 재전송작업이 수행된다. 

### Tcp 의 네트워크 상 혼잡을 줄이기 위한 방법은?
> 우선 혼잡이 발생되는 원인은 네트워크 latency와 대역폭 차지 및 제한된 buffer 의 문제가있다.
> 핵심은 window size를 조절하는 것이다.
> TCP slow start 를 통해 window 를 1부터 시작하여 RTT마다 2배씩 증가시켜준다.

### Tcp 에서 패킷 손실이 발생했을때 어떻게 해결?
> 중복된 ack 의 발생인 경우에는 일부 데이터가 전송이 안되었다고 판단하여 tcp slow start중 window size를 절반으로 줄여 재전송하는 방법,
> timeout에 의한 loss 인경우에는 전체가 손실되었다고 판단하여 window size를 1로 초기화하고 다시 전송하게 된다. 

## router에서 망 내의 기기에 대해 MAC 주소를 알아내는 방식은?
> 같은 네트워크 대역에 대해 ARP 프로토콜이 브로드캐스트로 전파되어 해당되는 대상이 MAC 주소를 반환한다.

### 같은 망내에서 ip를 할당하는 방법?
> 수동적으로 할당하는 경우에는 CIDR을 바탕으로 동일한 대역에 대해 중복되지 않는 숫자를 지정해주면 되고, 
> 자동적으로 할당하는 경우에는 DHCP 서버의 도움을 받아 자동할당받게된다.

### NAT 는 무엇인가?
> Network address transfer 의 약자로, 내부망의 ip를 외부로 노출시키지 않으면서 외부와 통신하는데 활용되는 기법,
> 특정 게이트웨이에서 외부로 노출된 ip주소를 내부망전체에서 일괄적으로 활용하는 기법이다. 
> 이때 내부망의 요청을 게이트웨이에 port로 할당되게되고, table상 key:value 형태로 저장되어 요청의 응답이 내부로 전송되어지게된다.

### 왜 사용하는가?
> 외부에서 내부망에 직접 접근을 차단하기 위함이다.

## routing algorithm은 무엇이 있나?
> link state 알고리즘은 다익스트라 알고리즘을 기반으로 하여 전체 노드에 대한 비용을 안다는 전제하에 각 노드별 최단거리를 구하는 방식,
> 거리 벡터 알고리즘은 벨만포드 알고리즘을 기반으로 하여 주변 노드에 대한 비용을 알고 최단거리를 쫓아가는 방식이다.


